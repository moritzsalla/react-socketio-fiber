{"ast":null,"code":"var _jsxFileName = \"/Users/moritzsalla/Documents/GitHub/react-socketio-fiber/app/src/Scene.js\";\nimport React, { useEffect } from 'react';\nimport { Canvas, extend, useThree } from 'react-three-fiber';\nimport Particle from './Particle';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nextend({\n  OrbitControls\n});\nconst GlobalStyle = createGlobalStyle`\n  html, body {\n    min-height: 100vh;\n    min-width: 100vw;\n    margin: 0;\n    padding: 0;\n  }\n\n  canvas {\n      height: 100vh;\n      width: 100vw;\n      position: fixed:\n      top: 0;\n      left: 0;\n  }\n`;\nconst HUD = styled.span`\n  position: fixed;\n  top: 0;\n  left: 0;\n  margin: 1rem;\n  font-family: sans-serif;\n  font-size: 3rem;\n`;\n\nconst CameraController = () => {\n  const {\n    camera,\n    gl\n  } = useThree();\n  useEffect(() => {\n    const controls = new OrbitControls(camera, gl.domElement);\n    controls.minDistance = 3;\n    controls.maxDistance = 20;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.1;\n    return () => {\n      controls.dispose();\n    };\n  }, [camera, gl]);\n  return null;\n};\n\nclass Scene extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      particles: 0\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({\n      particles: props.users\n    });\n  }\n\n  randCoord() {\n    let x = Math.random() * 2 - 1;\n    let y = Math.random() * 2 - 1;\n    let z = Math.random() * 2 - 1;\n    return [x, y, z];\n  }\n\n  randColor() {\n    let r = Math.floor(Math.random() * 255);\n    let g = Math.floor(Math.random() * 255);\n    let b = Math.floor(Math.random() * 255);\n    return [r, g, b];\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GlobalStyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(HUD, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, this.state.particles, \" Active Users\"), /*#__PURE__*/React.createElement(Canvas, {\n      pixelRatio: window.devicePixelRatio ? window.devicePixelRatio : 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CameraController, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"pointLight\", {\n      position: [10, 10, 10],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }), [...Array(this.state.particles)].map((e, i) => /*#__PURE__*/React.createElement(Particle, {\n      key: i,\n      position: this.randCoord(),\n      color: this.randColor(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Scene;","map":{"version":3,"sources":["/Users/moritzsalla/Documents/GitHub/react-socketio-fiber/app/src/Scene.js"],"names":["React","useEffect","Canvas","extend","useThree","Particle","styled","createGlobalStyle","OrbitControls","GlobalStyle","HUD","span","CameraController","camera","gl","controls","domElement","minDistance","maxDistance","enableDamping","dampingFactor","dispose","Scene","Component","constructor","state","particles","componentWillReceiveProps","props","setState","users","randCoord","x","Math","random","y","z","randColor","r","floor","g","b","render","window","devicePixelRatio","Array","map","e","i"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Canvas, extend, useThree } from 'react-three-fiber';\nimport Particle from './Particle';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nextend({ OrbitControls });\n\nconst GlobalStyle = createGlobalStyle`\n  html, body {\n    min-height: 100vh;\n    min-width: 100vw;\n    margin: 0;\n    padding: 0;\n  }\n\n  canvas {\n      height: 100vh;\n      width: 100vw;\n      position: fixed:\n      top: 0;\n      left: 0;\n  }\n`;\n\nconst HUD = styled.span`\n  position: fixed;\n  top: 0;\n  left: 0;\n  margin: 1rem;\n  font-family: sans-serif;\n  font-size: 3rem;\n`;\n\nconst CameraController = () => {\n  const { camera, gl } = useThree();\n  useEffect(() => {\n    const controls = new OrbitControls(camera, gl.domElement);\n\n    controls.minDistance = 3;\n    controls.maxDistance = 20;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.1;\n    return () => {\n      controls.dispose();\n    };\n  }, [camera, gl]);\n  return null;\n};\n\nclass Scene extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      particles: 0,\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({ particles: props.users });\n  }\n\n  randCoord() {\n    let x = Math.random() * 2 - 1;\n    let y = Math.random() * 2 - 1;\n    let z = Math.random() * 2 - 1;\n    return [x, y, z];\n  }\n\n  randColor() {\n    let r = Math.floor(Math.random() * 255);\n    let g = Math.floor(Math.random() * 255);\n    let b = Math.floor(Math.random() * 255);\n    return [r, g, b];\n  }\n\n  render() {\n    return (\n      <>\n        <GlobalStyle />\n        <HUD>{this.state.particles} Active Users</HUD>\n\n        <Canvas\n          pixelRatio={window.devicePixelRatio ? window.devicePixelRatio : 1}\n        >\n          <CameraController />\n\n          <ambientLight />\n          <pointLight position={[10, 10, 10]} />\n\n          {[...Array(this.state.particles)].map((e, i) => (\n            <Particle\n              key={i}\n              position={this.randCoord()}\n              color={this.randColor()}\n            />\n          ))}\n        </Canvas>\n      </>\n    );\n  }\n}\n\nexport default Scene;\n"]},"metadata":{},"sourceType":"module"}